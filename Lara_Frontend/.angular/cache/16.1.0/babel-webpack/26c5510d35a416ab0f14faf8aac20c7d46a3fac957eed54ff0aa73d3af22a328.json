{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Service/Login.service\";\nimport * as i2 from \"src/app/Service/friends.service\";\nimport * as i3 from \"src/app/Service/message.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"scrollMe\"];\nfunction MessageComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵlistener(\"click\", function MessageComponent_div_5_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const friend_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.changeCurrentChatUser(friend_r3));\n    });\n    i0.ɵɵelementStart(1, \"li\");\n    i0.ɵɵelement(2, \"img\", 3);\n    i0.ɵɵelementStart(3, \"div\")(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h3\");\n    i0.ɵɵtext(7, \" last Message \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const friend_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", friend_r3.profilePicture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(friend_r3.name);\n  }\n}\nfunction MessageComponent_div_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"li\", 12)(2, \"div\", 13);\n    i0.ɵɵelement(3, \"span\", 14);\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h3\");\n    i0.ɵɵtext(7, \"10:12AM, Today\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"div\", 15);\n    i0.ɵɵelementStart(9, \"div\", 16);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const chat_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r7.demoPerson.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", chat_r6.message, \" \");\n  }\n}\nfunction MessageComponent_div_16_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"li\", 17)(2, \"div\", 13)(3, \"h3\");\n    i0.ɵɵtext(4, \"10:12AM, Today\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"span\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"div\", 15);\n    i0.ɵɵelementStart(9, \"div\", 16);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const chat_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r8.loginInfoForMessage == null ? null : ctx_r8.loginInfoForMessage.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", chat_r6.message, \" \");\n  }\n}\nfunction MessageComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, MessageComponent_div_16_div_1_Template, 11, 2, \"div\", 11);\n    i0.ɵɵtemplate(2, MessageComponent_div_16_div_2_Template, 11, 2, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const chat_r6 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", chat_r6.messageReceiverId == (ctx_r2.loginInfoForMessage == null ? null : ctx_r2.loginInfoForMessage.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", chat_r6.messageSenderId == (ctx_r2.loginInfoForMessage == null ? null : ctx_r2.loginInfoForMessage.id));\n  }\n}\nexport class MessageComponent {\n  constructor(loginService, friendsService, messageService) {\n    this.loginService = loginService;\n    this.friendsService = friendsService;\n    this.messageService = messageService;\n    // this will store all the friends list\n    this.friendsInfo = [];\n    // friends list of this users\n    this.friendInfoOfUser = [];\n    // login info of user\n    this.loginInfo = [];\n    // store all the message\n    this.messageInfo = [];\n    //store message of current friend;\n    this.messageInfoOfCurrentFriend = [];\n    this.demoPerson = {\n      id: '',\n      emailAddress: '',\n      name: '',\n      password: '',\n      profilePicture: ''\n    };\n    this.demoMessageSorting = {\n      messageId: '',\n      messageSenderId: '',\n      messageReceiverId: '',\n      message: '',\n      sorting_number: 0\n    };\n    this.demoMessage = {\n      messageId: '',\n      messageSenderId: '',\n      messageReceiverId: '',\n      message: '',\n      sorting_number: 0\n    };\n  }\n  ngOnInit() {\n    this.getAllTheLoginInfo();\n  }\n  getAllTheLoginInfo() {\n    this.loginService.getAllLoginInfo().subscribe(data => {\n      this.loginInfo = data;\n      this.getAllFriendInfo();\n    });\n  }\n  getAllFriendInfo() {\n    this.friendsService.getAllFriendsInfo().subscribe(data => {\n      this.friendsInfo = data;\n      this.getAllMessageInfo();\n      this.getAllCurrentUserFriend();\n    });\n  }\n  getAllCurrentUserFriend() {\n    this.friendInfoOfUser = [];\n    for (var i = 0; i < this.friendsInfo.length; i++) {\n      if (this.friendsInfo[i].friendId == this.loginInfoForMessage?.id) {\n        for (var j = 0; j < this.loginInfo.length; j++) {\n          if (this.friendsInfo[i].friendPersonId == this.loginInfo[j].id) {\n            this.friendInfoOfUser.push(this.loginInfo[j]);\n            break;\n          }\n        }\n      }\n    }\n  }\n  // change the current chat user\n  changeCurrentChatUser(friend) {\n    this.demoPerson = friend;\n    this.messageInfoOfCurrentFriend = [];\n    for (var i = 0; i < this.messageInfo.length; i++) {\n      if (this.messageInfo[i].messageReceiverId == this.loginInfoForMessage?.id) {\n        if (this.messageInfo[i].messageSenderId == friend.id) {\n          this.messageInfoOfCurrentFriend.push(this.messageInfo[i]);\n        }\n      } else if (this.messageInfo[i].messageSenderId == this.loginInfoForMessage?.id) {\n        if (this.messageInfo[i].messageReceiverId == friend.id) {\n          this.messageInfoOfCurrentFriend.push(this.messageInfo[i]);\n        }\n      }\n    }\n    for (var i = 0; i < this.messageInfoOfCurrentFriend.length; i++) {\n      for (var j = i + 1; j < this.messageInfoOfCurrentFriend.length; j++) {\n        if (this.messageInfoOfCurrentFriend[j].sorting_number < this.messageInfoOfCurrentFriend[i].sorting_number) {\n          this.demoMessageSorting = this.messageInfoOfCurrentFriend[j];\n          this.messageInfoOfCurrentFriend[j] = this.messageInfoOfCurrentFriend[i];\n          this.messageInfoOfCurrentFriend[i] = this.demoMessageSorting;\n        }\n      }\n    }\n    this.scrollToBottom();\n  }\n  getAllMessageInfo() {\n    this.messageService.getAllMessageInfo().subscribe(message => {\n      this.messageInfo = message;\n    });\n  }\n  addMessage() {\n    this.demoMessage.messageSenderId = this.loginInfoForMessage?.id;\n    this.demoMessage.messageReceiverId = this.demoPerson.id;\n    this.demoMessage.sorting_number = this.messageInfoOfCurrentFriend.length + 1;\n    this.messageService.addMessage(this.demoMessage).subscribe(result => {\n      this.getAllMessageInfo();\n      this.messageInfoOfCurrentFriend.push(result);\n      this.demoMessage.message = '';\n    });\n  }\n  scrollToBottom() {\n    try {\n      this.myScrollCointer.nativeElement.scrollTop = this.myScrollCointer?.nativeElement.scrollHeight;\n    } catch (err) {}\n  }\n}\nMessageComponent.ɵfac = function MessageComponent_Factory(t) {\n  return new (t || MessageComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.FriendsService), i0.ɵɵdirectiveInject(i3.MessageService));\n};\nMessageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MessageComponent,\n  selectors: [[\"app-message\"]],\n  viewQuery: function MessageComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myScrollCointer = _t.first);\n    }\n  },\n  inputs: {\n    loginInfoForMessage: \"loginInfoForMessage\"\n  },\n  decls: 23,\n  vars: 5,\n  consts: [[\"id\", \"container\"], [\"type\", \"text\", \"placeholder\", \"search\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"alt\", \"\", 2, \"height\", \"60px\", \"width\", \"60px\", 3, \"src\"], [\"id\", \"chat\"], [\"scrollMe\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Type your message\", 3, \"ngModel\", \"ngModelChange\"], [\"src\", \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_picture.png\", \"alt\", \"\"], [\"src\", \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_file.png\", \"alt\", \"\"], [3, \"click\"], [4, \"ngIf\"], [1, \"you\"], [1, \"entete\"], [1, \"status\", \"green\"], [1, \"triangle\"], [1, \"message\"], [1, \"me\"], [1, \"status\", \"blue\"]],\n  template: function MessageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"aside\")(2, \"header\");\n      i0.ɵɵelement(3, \"input\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ul\");\n      i0.ɵɵtemplate(5, MessageComponent_div_5_Template, 8, 2, \"div\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"main\")(7, \"header\");\n      i0.ɵɵelement(8, \"img\", 3);\n      i0.ɵɵelementStart(9, \"div\")(10, \"h2\");\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"h3\");\n      i0.ɵɵtext(13, \"Last Seen\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"ul\", 4, 5);\n      i0.ɵɵtemplate(16, MessageComponent_div_16_Template, 3, 2, \"div\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"footer\")(18, \"textarea\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function MessageComponent_Template_textarea_ngModelChange_18_listener($event) {\n        return ctx.demoMessage.message = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"img\", 8)(20, \"img\", 9);\n      i0.ɵɵelementStart(21, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function MessageComponent_Template_button_click_21_listener() {\n        return ctx.addMessage();\n      });\n      i0.ɵɵtext(22, \"Send\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.friendInfoOfUser);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.demoPerson.profilePicture, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Chat with \", ctx.demoPerson.name, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messageInfoOfCurrentFriend);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.demoMessage.message);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"*[_ngcontent-%COMP%]{\\n\\tbox-sizing:border-box;\\n}\\nbody[_ngcontent-%COMP%]{\\n\\tbackground-color:#abd9e9;\\n\\tfont-family:Arial;\\n}\\n#container[_ngcontent-%COMP%]{\\n\\twidth:750px;\\n\\theight:800px;\\n\\tbackground:#eeeee4;\\n\\tmargin:0 auto;\\n\\tfont-size:0;\\n\\tborder-radius:5px;\\n\\toverflow:hidden;\\n}\\naside[_ngcontent-%COMP%]{\\n\\twidth:260px;\\n\\theight:800px;\\n\\tbackground-color:#3b3e49;\\n\\tdisplay:inline-block;\\n\\tfont-size:15px;\\n\\tvertical-align:top;\\n}\\nmain[_ngcontent-%COMP%]{\\n\\twidth:490px;\\n\\theight:800px;\\n\\tdisplay:inline-block;\\n\\tfont-size:15px;\\n\\tvertical-align:top;\\n}\\n\\naside[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{\\n\\tpadding:30px 20px;\\n}\\naside[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\\n\\twidth:100%;\\n\\theight:50px;\\n\\tline-height:50px;\\n\\tpadding:0 50px 0 20px;\\n\\tbackground-color:#5e616a;\\n\\tborder:none;\\n\\tborder-radius:3px;\\n\\tcolor:#fff;\\n\\tbackground-image:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_search.png);\\n\\tbackground-repeat:no-repeat;\\n\\tbackground-position:170px;\\n\\tbackground-size:40px;\\n}\\naside[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{\\n\\tcolor:#fff;\\n}\\naside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{\\n\\tpadding-left:0;\\n\\tmargin:0;\\n\\tlist-style-type:none;\\n\\toverflow-y:scroll;\\n\\theight:690px;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{\\n\\tpadding:10px 0;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{\\n\\tbackground-color:#5e616a;\\n}\\nh2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{\\n\\tmargin:0;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\n\\tborder-radius:50%;\\n\\tmargin-left:20px;\\n\\tmargin-right:8px;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n\\tdisplay:inline-block;\\n\\tvertical-align:top;\\n\\tmargin-top:12px;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n\\tfont-size:14px;\\n\\tcolor:#fff;\\n\\tfont-weight:normal;\\n\\tmargin-bottom:5px;\\n}\\naside[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n\\tfont-size:12px;\\n\\tcolor:#7e818a;\\n\\tfont-weight:normal;\\n}\\n\\n.status[_ngcontent-%COMP%]{\\n\\twidth:8px;\\n\\theight:8px;\\n\\tborder-radius:50%;\\n\\tdisplay:inline-block;\\n\\tmargin-right:7px;\\n}\\n.green[_ngcontent-%COMP%]{\\n\\tbackground-color:#58b666;\\n}\\n.orange[_ngcontent-%COMP%]{\\n\\tbackground-color:#ff725d;\\n}\\n.blue[_ngcontent-%COMP%]{\\n\\tbackground-color:#6fbced;\\n\\tmargin-right:0;\\n\\tmargin-left:7px;\\n}\\n\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{\\n\\theight:110px;\\n\\tpadding:30px 20px 30px 40px;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]{\\n\\tdisplay:inline-block;\\n\\tvertical-align:top;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:first-child{\\n\\tborder-radius:50%;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child{\\n\\twidth:24px;\\n\\tmargin-top:8px;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n\\tmargin-left:10px;\\n\\tmargin-right:145px;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n\\tfont-size:16px;\\n\\tmargin-bottom:5px;\\n}\\nmain[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n\\tfont-size:14px;\\n\\tfont-weight:normal;\\n\\tcolor:#7e818a;\\n}\\n\\n#chat[_ngcontent-%COMP%]{\\n\\tpadding-left:0;\\n\\tmargin:0;\\n\\tlist-style-type:none;\\n\\toverflow:scroll;\\n\\theight:535px;\\n\\tborder-top:2px solid #fff;\\n\\tborder-bottom:2px solid #fff;\\n}\\n#chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{\\n\\tpadding:10px 30px;\\n}\\n#chat[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], #chat[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n\\tdisplay:inline-block;\\n\\tfont-size:13px;\\n\\tfont-weight:normal;\\n}\\n#chat[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n\\tcolor:#bbb;\\n}\\n#chat[_ngcontent-%COMP%]   .entete[_ngcontent-%COMP%]{\\n\\tmargin-bottom:5px;\\n}\\n#chat[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{\\n\\tpadding:20px;\\n\\tcolor:#fff;\\n\\tline-height:25px;\\n\\tmax-width:90%;\\n\\tdisplay:inline-block;\\n\\ttext-align:left;\\n\\tborder-radius:5px;\\n}\\n#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]{\\n\\ttext-align:right;\\n}\\n#chat[_ngcontent-%COMP%]   .you[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{\\n\\tbackground-color:#58b666;\\n}\\n#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{\\n\\tbackground-color:#6fbced;\\n}\\n#chat[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{\\n\\twidth: 0;\\n\\theight: 0;\\n\\tborder-style: solid;\\n\\tborder-width: 0 10px 10px 10px;\\n}\\n#chat[_ngcontent-%COMP%]   .you[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{\\n\\t\\tborder-color: transparent transparent #58b666 transparent;\\n\\t\\tmargin-left:15px;\\n}\\n#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{\\n\\t\\tborder-color: transparent transparent #6fbced transparent;\\n\\t\\tmargin-left:375px;\\n}\\n\\nmain[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{\\n\\theight:155px;\\n\\tpadding:20px 30px 10px 20px;\\n}\\nmain[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{\\n\\tresize:none;\\n\\tborder:none;\\n\\tdisplay:block;\\n\\twidth:100%;\\n\\theight:80px;\\n\\tborder-radius:3px;\\n\\tpadding:20px;\\n\\tfont-size:13px;\\n\\tmargin-bottom:13px;\\n}\\nmain[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{\\n\\tcolor:#ddd;\\n    -webkit-text-decoration: black;\\n            text-decoration: black;\\n}\\nmain[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\n\\theight:30px;\\n\\tcursor:pointer;\\n}\\nmain[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\n\\ttext-decoration:none;\\n\\ttext-transform:uppercase;\\n\\tfont-weight:bold;\\n    \\n\\tbackground-color: turquoise;\\n    border: none;\\n    border-radius: 10px;\\n    cursor: pointer;\\n    padding: 12px 6px;\\n\\n\\tvertical-align:top;\\n\\tmargin-left:333px;\\n\\tdisplay:inline-block;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLHFCQUFxQjtBQUN0QjtBQUNBO0NBQ0Msd0JBQXdCO0NBQ3hCLGlCQUFpQjtBQUNsQjtBQUNBO0NBQ0MsV0FBVztDQUNYLFlBQVk7Q0FDWixrQkFBa0I7Q0FDbEIsYUFBYTtDQUNiLFdBQVc7Q0FDWCxpQkFBaUI7Q0FDakIsZUFBZTtBQUNoQjtBQUNBO0NBQ0MsV0FBVztDQUNYLFlBQVk7Q0FDWix3QkFBd0I7Q0FDeEIsb0JBQW9CO0NBQ3BCLGNBQWM7Q0FDZCxrQkFBa0I7QUFDbkI7QUFDQTtDQUNDLFdBQVc7Q0FDWCxZQUFZO0NBQ1osb0JBQW9CO0NBQ3BCLGNBQWM7Q0FDZCxrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxpQkFBaUI7QUFDbEI7QUFDQTtDQUNDLFVBQVU7Q0FDVixXQUFXO0NBQ1gsZ0JBQWdCO0NBQ2hCLHFCQUFxQjtDQUNyQix3QkFBd0I7Q0FDeEIsV0FBVztDQUNYLGlCQUFpQjtDQUNqQixVQUFVO0NBQ1YseUZBQXlGO0NBQ3pGLDJCQUEyQjtDQUMzQix5QkFBeUI7Q0FDekIsb0JBQW9CO0FBQ3JCO0FBQ0E7Q0FDQyxVQUFVO0FBQ1g7QUFDQTtDQUNDLGNBQWM7Q0FDZCxRQUFRO0NBQ1Isb0JBQW9CO0NBQ3BCLGlCQUFpQjtDQUNqQixZQUFZO0FBQ2I7QUFDQTtDQUNDLGNBQWM7QUFDZjtBQUNBO0NBQ0Msd0JBQXdCO0FBQ3pCO0FBQ0E7Q0FDQyxRQUFRO0FBQ1Q7QUFDQTtDQUNDLGlCQUFpQjtDQUNqQixnQkFBZ0I7Q0FDaEIsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxvQkFBb0I7Q0FDcEIsa0JBQWtCO0NBQ2xCLGVBQWU7QUFDaEI7QUFDQTtDQUNDLGNBQWM7Q0FDZCxVQUFVO0NBQ1Ysa0JBQWtCO0NBQ2xCLGlCQUFpQjtBQUNsQjtBQUNBO0NBQ0MsY0FBYztDQUNkLGFBQWE7Q0FDYixrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxTQUFTO0NBQ1QsVUFBVTtDQUNWLGlCQUFpQjtDQUNqQixvQkFBb0I7Q0FDcEIsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyx3QkFBd0I7QUFDekI7QUFDQTtDQUNDLHdCQUF3QjtBQUN6QjtBQUNBO0NBQ0Msd0JBQXdCO0NBQ3hCLGNBQWM7Q0FDZCxlQUFlO0FBQ2hCOztBQUVBO0NBQ0MsWUFBWTtDQUNaLDJCQUEyQjtBQUM1QjtBQUNBO0NBQ0Msb0JBQW9CO0NBQ3BCLGtCQUFrQjtBQUNuQjtBQUNBO0NBQ0MsaUJBQWlCO0FBQ2xCO0FBQ0E7Q0FDQyxVQUFVO0NBQ1YsY0FBYztBQUNmO0FBQ0E7Q0FDQyxnQkFBZ0I7Q0FDaEIsa0JBQWtCO0FBQ25CO0FBQ0E7Q0FDQyxjQUFjO0NBQ2QsaUJBQWlCO0FBQ2xCO0FBQ0E7Q0FDQyxjQUFjO0NBQ2Qsa0JBQWtCO0NBQ2xCLGFBQWE7QUFDZDs7QUFFQTtDQUNDLGNBQWM7Q0FDZCxRQUFRO0NBQ1Isb0JBQW9CO0NBQ3BCLGVBQWU7Q0FDZixZQUFZO0NBQ1oseUJBQXlCO0NBQ3pCLDRCQUE0QjtBQUM3QjtBQUNBO0NBQ0MsaUJBQWlCO0FBQ2xCO0FBQ0E7Q0FDQyxvQkFBb0I7Q0FDcEIsY0FBYztDQUNkLGtCQUFrQjtBQUNuQjtBQUNBO0NBQ0MsVUFBVTtBQUNYO0FBQ0E7Q0FDQyxpQkFBaUI7QUFDbEI7QUFDQTtDQUNDLFlBQVk7Q0FDWixVQUFVO0NBQ1YsZ0JBQWdCO0NBQ2hCLGFBQWE7Q0FDYixvQkFBb0I7Q0FDcEIsZUFBZTtDQUNmLGlCQUFpQjtBQUNsQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyx3QkFBd0I7QUFDekI7QUFDQTtDQUNDLHdCQUF3QjtBQUN6QjtBQUNBO0NBQ0MsUUFBUTtDQUNSLFNBQVM7Q0FDVCxtQkFBbUI7Q0FDbkIsOEJBQThCO0FBQy9CO0FBQ0E7RUFDRSx5REFBeUQ7RUFDekQsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSx5REFBeUQ7RUFDekQsaUJBQWlCO0FBQ25COztBQUVBO0NBQ0MsWUFBWTtDQUNaLDJCQUEyQjtBQUM1QjtBQUNBO0NBQ0MsV0FBVztDQUNYLFdBQVc7Q0FDWCxhQUFhO0NBQ2IsVUFBVTtDQUNWLFdBQVc7Q0FDWCxpQkFBaUI7Q0FDakIsWUFBWTtDQUNaLGNBQWM7Q0FDZCxrQkFBa0I7QUFDbkI7QUFDQTtDQUNDLFVBQVU7SUFDUCw4QkFBc0I7WUFBdEIsc0JBQXNCO0FBQzFCO0FBQ0E7Q0FDQyxXQUFXO0NBQ1gsY0FBYztBQUNmO0FBQ0E7Q0FDQyxvQkFBb0I7Q0FDcEIsd0JBQXdCO0NBQ3hCLGdCQUFnQjs7Q0FFaEIsMkJBQTJCO0lBQ3hCLFlBQVk7SUFDWixtQkFBbUI7SUFDbkIsZUFBZTtJQUNmLGlCQUFpQjs7Q0FFcEIsa0JBQWtCO0NBQ2xCLGlCQUFpQjtDQUNqQixvQkFBb0I7QUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyIqe1xuXHRib3gtc2l6aW5nOmJvcmRlci1ib3g7XG59XG5ib2R5e1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiNhYmQ5ZTk7XG5cdGZvbnQtZmFtaWx5OkFyaWFsO1xufVxuI2NvbnRhaW5lcntcblx0d2lkdGg6NzUwcHg7XG5cdGhlaWdodDo4MDBweDtcblx0YmFja2dyb3VuZDojZWVlZWU0O1xuXHRtYXJnaW46MCBhdXRvO1xuXHRmb250LXNpemU6MDtcblx0Ym9yZGVyLXJhZGl1czo1cHg7XG5cdG92ZXJmbG93OmhpZGRlbjtcbn1cbmFzaWRle1xuXHR3aWR0aDoyNjBweDtcblx0aGVpZ2h0OjgwMHB4O1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiMzYjNlNDk7XG5cdGRpc3BsYXk6aW5saW5lLWJsb2NrO1xuXHRmb250LXNpemU6MTVweDtcblx0dmVydGljYWwtYWxpZ246dG9wO1xufVxubWFpbntcblx0d2lkdGg6NDkwcHg7XG5cdGhlaWdodDo4MDBweDtcblx0ZGlzcGxheTppbmxpbmUtYmxvY2s7XG5cdGZvbnQtc2l6ZToxNXB4O1xuXHR2ZXJ0aWNhbC1hbGlnbjp0b3A7XG59XG5cbmFzaWRlIGhlYWRlcntcblx0cGFkZGluZzozMHB4IDIwcHg7XG59XG5hc2lkZSBpbnB1dHtcblx0d2lkdGg6MTAwJTtcblx0aGVpZ2h0OjUwcHg7XG5cdGxpbmUtaGVpZ2h0OjUwcHg7XG5cdHBhZGRpbmc6MCA1MHB4IDAgMjBweDtcblx0YmFja2dyb3VuZC1jb2xvcjojNWU2MTZhO1xuXHRib3JkZXI6bm9uZTtcblx0Ym9yZGVyLXJhZGl1czozcHg7XG5cdGNvbG9yOiNmZmY7XG5cdGJhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vczMtdXMtd2VzdC0yLmFtYXpvbmF3cy5jb20vcy5jZHBuLmlvLzE5NDAzMDYvaWNvX3NlYXJjaC5wbmcpO1xuXHRiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7XG5cdGJhY2tncm91bmQtcG9zaXRpb246MTcwcHg7XG5cdGJhY2tncm91bmQtc2l6ZTo0MHB4O1xufVxuYXNpZGUgaW5wdXQ6OnBsYWNlaG9sZGVye1xuXHRjb2xvcjojZmZmO1xufVxuYXNpZGUgdWx7XG5cdHBhZGRpbmctbGVmdDowO1xuXHRtYXJnaW46MDtcblx0bGlzdC1zdHlsZS10eXBlOm5vbmU7XG5cdG92ZXJmbG93LXk6c2Nyb2xsO1xuXHRoZWlnaHQ6NjkwcHg7XG59XG5hc2lkZSBsaXtcblx0cGFkZGluZzoxMHB4IDA7XG59XG5hc2lkZSBsaTpob3Zlcntcblx0YmFja2dyb3VuZC1jb2xvcjojNWU2MTZhO1xufVxuaDIsaDN7XG5cdG1hcmdpbjowO1xufVxuYXNpZGUgbGkgaW1ne1xuXHRib3JkZXItcmFkaXVzOjUwJTtcblx0bWFyZ2luLWxlZnQ6MjBweDtcblx0bWFyZ2luLXJpZ2h0OjhweDtcbn1cbmFzaWRlIGxpIGRpdntcblx0ZGlzcGxheTppbmxpbmUtYmxvY2s7XG5cdHZlcnRpY2FsLWFsaWduOnRvcDtcblx0bWFyZ2luLXRvcDoxMnB4O1xufVxuYXNpZGUgbGkgaDJ7XG5cdGZvbnQtc2l6ZToxNHB4O1xuXHRjb2xvcjojZmZmO1xuXHRmb250LXdlaWdodDpub3JtYWw7XG5cdG1hcmdpbi1ib3R0b206NXB4O1xufVxuYXNpZGUgbGkgaDN7XG5cdGZvbnQtc2l6ZToxMnB4O1xuXHRjb2xvcjojN2U4MThhO1xuXHRmb250LXdlaWdodDpub3JtYWw7XG59XG5cbi5zdGF0dXN7XG5cdHdpZHRoOjhweDtcblx0aGVpZ2h0OjhweDtcblx0Ym9yZGVyLXJhZGl1czo1MCU7XG5cdGRpc3BsYXk6aW5saW5lLWJsb2NrO1xuXHRtYXJnaW4tcmlnaHQ6N3B4O1xufVxuLmdyZWVue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiM1OGI2NjY7XG59XG4ub3Jhbmdle1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiNmZjcyNWQ7XG59XG4uYmx1ZXtcblx0YmFja2dyb3VuZC1jb2xvcjojNmZiY2VkO1xuXHRtYXJnaW4tcmlnaHQ6MDtcblx0bWFyZ2luLWxlZnQ6N3B4O1xufVxuXG5tYWluIGhlYWRlcntcblx0aGVpZ2h0OjExMHB4O1xuXHRwYWRkaW5nOjMwcHggMjBweCAzMHB4IDQwcHg7XG59XG5tYWluIGhlYWRlciA+ICp7XG5cdGRpc3BsYXk6aW5saW5lLWJsb2NrO1xuXHR2ZXJ0aWNhbC1hbGlnbjp0b3A7XG59XG5tYWluIGhlYWRlciBpbWc6Zmlyc3QtY2hpbGR7XG5cdGJvcmRlci1yYWRpdXM6NTAlO1xufVxubWFpbiBoZWFkZXIgaW1nOmxhc3QtY2hpbGR7XG5cdHdpZHRoOjI0cHg7XG5cdG1hcmdpbi10b3A6OHB4O1xufVxubWFpbiBoZWFkZXIgZGl2e1xuXHRtYXJnaW4tbGVmdDoxMHB4O1xuXHRtYXJnaW4tcmlnaHQ6MTQ1cHg7XG59XG5tYWluIGhlYWRlciBoMntcblx0Zm9udC1zaXplOjE2cHg7XG5cdG1hcmdpbi1ib3R0b206NXB4O1xufVxubWFpbiBoZWFkZXIgaDN7XG5cdGZvbnQtc2l6ZToxNHB4O1xuXHRmb250LXdlaWdodDpub3JtYWw7XG5cdGNvbG9yOiM3ZTgxOGE7XG59XG5cbiNjaGF0e1xuXHRwYWRkaW5nLWxlZnQ6MDtcblx0bWFyZ2luOjA7XG5cdGxpc3Qtc3R5bGUtdHlwZTpub25lO1xuXHRvdmVyZmxvdzpzY3JvbGw7XG5cdGhlaWdodDo1MzVweDtcblx0Ym9yZGVyLXRvcDoycHggc29saWQgI2ZmZjtcblx0Ym9yZGVyLWJvdHRvbToycHggc29saWQgI2ZmZjtcbn1cbiNjaGF0IGxpe1xuXHRwYWRkaW5nOjEwcHggMzBweDtcbn1cbiNjaGF0IGgyLCNjaGF0IGgze1xuXHRkaXNwbGF5OmlubGluZS1ibG9jaztcblx0Zm9udC1zaXplOjEzcHg7XG5cdGZvbnQtd2VpZ2h0Om5vcm1hbDtcbn1cbiNjaGF0IGgze1xuXHRjb2xvcjojYmJiO1xufVxuI2NoYXQgLmVudGV0ZXtcblx0bWFyZ2luLWJvdHRvbTo1cHg7XG59XG4jY2hhdCAubWVzc2FnZXtcblx0cGFkZGluZzoyMHB4O1xuXHRjb2xvcjojZmZmO1xuXHRsaW5lLWhlaWdodDoyNXB4O1xuXHRtYXgtd2lkdGg6OTAlO1xuXHRkaXNwbGF5OmlubGluZS1ibG9jaztcblx0dGV4dC1hbGlnbjpsZWZ0O1xuXHRib3JkZXItcmFkaXVzOjVweDtcbn1cbiNjaGF0IC5tZXtcblx0dGV4dC1hbGlnbjpyaWdodDtcbn1cbiNjaGF0IC55b3UgLm1lc3NhZ2V7XG5cdGJhY2tncm91bmQtY29sb3I6IzU4YjY2Njtcbn1cbiNjaGF0IC5tZSAubWVzc2FnZXtcblx0YmFja2dyb3VuZC1jb2xvcjojNmZiY2VkO1xufVxuI2NoYXQgLnRyaWFuZ2xle1xuXHR3aWR0aDogMDtcblx0aGVpZ2h0OiAwO1xuXHRib3JkZXItc3R5bGU6IHNvbGlkO1xuXHRib3JkZXItd2lkdGg6IDAgMTBweCAxMHB4IDEwcHg7XG59XG4jY2hhdCAueW91IC50cmlhbmdsZXtcblx0XHRib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICM1OGI2NjYgdHJhbnNwYXJlbnQ7XG5cdFx0bWFyZ2luLWxlZnQ6MTVweDtcbn1cbiNjaGF0IC5tZSAudHJpYW5nbGV7XG5cdFx0Ym9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCAjNmZiY2VkIHRyYW5zcGFyZW50O1xuXHRcdG1hcmdpbi1sZWZ0OjM3NXB4O1xufVxuXG5tYWluIGZvb3Rlcntcblx0aGVpZ2h0OjE1NXB4O1xuXHRwYWRkaW5nOjIwcHggMzBweCAxMHB4IDIwcHg7XG59XG5tYWluIGZvb3RlciB0ZXh0YXJlYXtcblx0cmVzaXplOm5vbmU7XG5cdGJvcmRlcjpub25lO1xuXHRkaXNwbGF5OmJsb2NrO1xuXHR3aWR0aDoxMDAlO1xuXHRoZWlnaHQ6ODBweDtcblx0Ym9yZGVyLXJhZGl1czozcHg7XG5cdHBhZGRpbmc6MjBweDtcblx0Zm9udC1zaXplOjEzcHg7XG5cdG1hcmdpbi1ib3R0b206MTNweDtcbn1cbm1haW4gZm9vdGVyIHRleHRhcmVhOjpwbGFjZWhvbGRlcntcblx0Y29sb3I6I2RkZDtcbiAgICB0ZXh0LWRlY29yYXRpb246IGJsYWNrO1xufVxubWFpbiBmb290ZXIgaW1ne1xuXHRoZWlnaHQ6MzBweDtcblx0Y3Vyc29yOnBvaW50ZXI7XG59XG5tYWluIGZvb3RlciBidXR0b257XG5cdHRleHQtZGVjb3JhdGlvbjpub25lO1xuXHR0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7XG5cdGZvbnQtd2VpZ2h0OmJvbGQ7XG4gICAgXG5cdGJhY2tncm91bmQtY29sb3I6IHR1cnF1b2lzZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogMTJweCA2cHg7XG5cblx0dmVydGljYWwtYWxpZ246dG9wO1xuXHRtYXJnaW4tbGVmdDozMzNweDtcblx0ZGlzcGxheTppbmxpbmUtYmxvY2s7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","MessageComponent_div_5_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","_r5","friend_r3","$implicit","ctx_r4","ɵɵnextContext","ɵɵresetView","changeCurrentChatUser","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵpropertyInterpolate","profilePicture","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","ctx_r7","demoPerson","ɵɵtextInterpolate1","chat_r6","message","ctx_r8","loginInfoForMessage","ɵɵtemplate","MessageComponent_div_16_div_1_Template","MessageComponent_div_16_div_2_Template","ɵɵproperty","messageReceiverId","ctx_r2","id","messageSenderId","MessageComponent","constructor","loginService","friendsService","messageService","friendsInfo","friendInfoOfUser","loginInfo","messageInfo","messageInfoOfCurrentFriend","emailAddress","password","demoMessageSorting","messageId","sorting_number","demoMessage","ngOnInit","getAllTheLoginInfo","getAllLoginInfo","subscribe","data","getAllFriendInfo","getAllFriendsInfo","getAllMessageInfo","getAllCurrentUserFriend","i","length","friendId","j","friendPersonId","push","friend","scrollToBottom","addMessage","result","myScrollCointer","nativeElement","scrollTop","scrollHeight","err","ɵɵdirectiveInject","i1","LoginService","i2","FriendsService","i3","MessageService","selectors","viewQuery","MessageComponent_Query","rf","ctx","MessageComponent_div_5_Template","MessageComponent_div_16_Template","MessageComponent_Template_textarea_ngModelChange_18_listener","$event","MessageComponent_Template_button_click_21_listener"],"sources":["C:\\Users\\AmirHastor\\Lara\\src\\app\\components\\message\\message.component.ts","C:\\Users\\AmirHastor\\Lara\\src\\app\\components\\message\\message.component.html"],"sourcesContent":["import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { of } from 'rxjs';\nimport { FriendsInfo } from 'src/app/Models/friends.model';\nimport { LoginInfo } from 'src/app/Models/login.model';\nimport { MessageInfo } from 'src/app/Models/message.model';\nimport { FriendsService } from 'src/app/Service/friends.service';\nimport { LoginService } from 'src/app/Service/Login.service';\nimport { MessageService } from 'src/app/Service/message.service';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.css']\n})\nexport class MessageComponent implements OnInit {\n\n  @Input() loginInfoForMessage : LoginInfo | undefined;\n\n  // this will store all the friends list\n  friendsInfo : FriendsInfo[] = [];\n\n  // friends list of this users\n  friendInfoOfUser : LoginInfo[] = [];\n\n  // login info of user\n  loginInfo : LoginInfo[] = []; \n\n  // store all the message\n  messageInfo : MessageInfo[] = [];\n\n  //store message of current friend;\n  messageInfoOfCurrentFriend : MessageInfo[] = [];\n  \n  constructor(private loginService: LoginService, private friendsService: FriendsService, private messageService : MessageService) { }\n\n  ngOnInit(): void {\n    this.getAllTheLoginInfo();\n  }\n\n  getAllTheLoginInfo(){\n    this.loginService.getAllLoginInfo().subscribe (data => {\n      this.loginInfo = data;\n      this.getAllFriendInfo();\n    })\n  }\n\n  getAllFriendInfo(){\n    this.friendsService.getAllFriendsInfo().subscribe (data => {\n      this.friendsInfo = data;\n      this.getAllMessageInfo();\n      this.getAllCurrentUserFriend();\n    });\n  }\n\n  getAllCurrentUserFriend(){\n    this.friendInfoOfUser = [];\n    for (var i=0;i<this.friendsInfo.length;i++) {\n      if (this.friendsInfo[i].friendId == this.loginInfoForMessage?.id){\n\n        for (var j=0;j<this.loginInfo.length; j++){\n          if (this.friendsInfo[i].friendPersonId == this.loginInfo[j].id){\n            this.friendInfoOfUser.push(this.loginInfo[j]);\n            break;\n          }\n        }\n      }\n\n    }\n  }\n\n  demoPerson : LoginInfo = {\n    id: '',\n    emailAddress: '',\n    name: '',\n    password: '',\n    profilePicture: ''\n  }\n\n  demoMessageSorting : MessageInfo = {\n    messageId: '',\n    messageSenderId: '',\n    messageReceiverId: '',\n    message: '',\n    sorting_number: 0\n  }\n\n  // change the current chat user\n  changeCurrentChatUser(friend : LoginInfo){\n    this.demoPerson = friend;\n    this.messageInfoOfCurrentFriend = [];\n\n    for (var i=0;i<this.messageInfo.length;i++){\n      if (this.messageInfo[i].messageReceiverId == this.loginInfoForMessage?.id){\n        if (this.messageInfo[i].messageSenderId == friend.id){\n          this.messageInfoOfCurrentFriend.push(this.messageInfo[i]);\n        }\n      }\n      else if (this.messageInfo[i].messageSenderId == this.loginInfoForMessage?.id){\n        if (this.messageInfo[i].messageReceiverId == friend.id){\n          this.messageInfoOfCurrentFriend.push(this.messageInfo[i]);\n        }\n      }\n    }\n    for (var i=0;i<this.messageInfoOfCurrentFriend.length;i++) {\n      for (var j=i+1; j<this.messageInfoOfCurrentFriend.length;j++) {\n        if (this.messageInfoOfCurrentFriend[j].sorting_number<this.messageInfoOfCurrentFriend[i].sorting_number){\n          this.demoMessageSorting = this.messageInfoOfCurrentFriend[j];\n          this.messageInfoOfCurrentFriend[j] = this.messageInfoOfCurrentFriend[i];\n          this.messageInfoOfCurrentFriend[i] = this.demoMessageSorting; \n        }\n      }\n    }\n    this.scrollToBottom();\n  }\n\n  \n\n  getAllMessageInfo(){\n    this.messageService.getAllMessageInfo().subscribe(message => {\n      this.messageInfo = message;\n    })\n  }\n\n  demoMessage : MessageInfo = {\n    messageId: '',\n    messageSenderId: '',\n    messageReceiverId: '',\n    message: '',\n    sorting_number: 0\n  }\n\n  addMessage(){\n    this.demoMessage.messageSenderId = this.loginInfoForMessage?.id as string;\n    this.demoMessage.messageReceiverId = this.demoPerson.id;\n    this.demoMessage.sorting_number = this.messageInfoOfCurrentFriend.length + 1;\n    this.messageService.addMessage(this.demoMessage).subscribe(result => {\n      this.getAllMessageInfo();\n      this.messageInfoOfCurrentFriend.push(result);\n      this.demoMessage.message = '';\n    })\n  }\n\n  // try for auto scrolling\n  \n\n  @ViewChild('scrollMe')\n  private myScrollCointer!: ElementRef;\n  scrollToBottom():void{\n    try{\n      this.myScrollCointer.nativeElement.scrollTop = this.myScrollCointer?.nativeElement.scrollHeight;\n    }catch(err){\n    }\n  }\n\n}\n","<div id=\"container\">\n\t<aside>\n\t\t<header>\n\t\t\t<input type=\"text\" placeholder=\"search\">\n\t\t</header>\n        <ul>\n\t\t    <div *ngFor=\"let friend of friendInfoOfUser\" (click)=\"changeCurrentChatUser(friend)\">\n                <li>\n                    <img src=\"{{friend.profilePicture}}\" style=\"height: 60px; width: 60px;\" alt=\"\">\n                    <div>\n                        <h2>{{friend.name}}</h2>\n                        <h3>\n                            last Message\n                        </h3>\n                    </div>\n                </li>\n            </div>\n        </ul>\n\t</aside>\n\n\t<main>\n\t\t<header>\n\t\t\t<img src=\"{{this.demoPerson.profilePicture}}\"style=\"height: 60px; width: 60px;\" alt=\"\">\n\t\t\t<div>\n\t\t\t\t<h2>Chat with {{this.demoPerson.name}}</h2>\n\t\t\t\t<h3>Last Seen</h3>\n\t\t\t</div>\n\t\t</header>\n\n\t\t<ul id=\"chat\" #scrollMe>\n            <div *ngFor=\"let chat of messageInfoOfCurrentFriend\">\n                <div *ngIf=\"chat.messageReceiverId==this.loginInfoForMessage?.id\">\n                    <li class=\"you\">\n                        <div class=\"entete\">\n                            <span class=\"status green\"></span>\n                            <h2>{{demoPerson.name}}</h2>\n                            <h3>10:12AM, Today</h3>\n                        </div>\n                        <div class=\"triangle\"></div>\n                        <div class=\"message\">\n                            {{chat.message}}\n                        </div>\n                    </li>\n                </div>\n\n                <div *ngIf=\"chat.messageSenderId==this.loginInfoForMessage?.id\">\n                    <li class=\"me\">\n                        <div class=\"entete\">\n                            <h3>10:12AM, Today</h3>\n                            <h2>{{this.loginInfoForMessage?.name}}</h2>\n                            <span class=\"status blue\"></span>\n                        </div>\n                        <div class=\"triangle\"></div>\n                        <div class=\"message\">\n                            {{chat.message}}\n                        </div>\n                    </li>\n                </div>\n\n            </div>\n\t\t</ul>\n\t\t<footer>\n\t\t\t<textarea placeholder=\"Type your message\" [(ngModel)] = \"demoMessage.message\"></textarea>\n\t\t\t<img src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_picture.png\" alt=\"\">\n\t\t\t<img src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_file.png\" alt=\"\">\n            <button (click)=\"addMessage()\">Send</button>\n\t\t</footer>\n\t</main>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}